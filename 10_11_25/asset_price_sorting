import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import time

df = pd.read_csv('amazon_historical_nasdaq.csv')

df['Date'] = pd.to_datetime(df['Date'], format='%m/%d/%Y')
df = df.sort_values(by='Date', ascending=True)

pd.set_option('display.max_rows', None)

df['Close/Last'] = df['Close/Last'].replace('[\$,]', '', regex=True).astype(float)
df['Daily Price Change'] = df['Close/Last'].diff()

print(df)

price_changes = df['Daily Price Change'].dropna().to_numpy()
times = []

for i in range(7, len(price_changes)):
    
    array_to_sort = price_changes[:i]
    
    start_time = time.perf_counter()
    sorted_array = sorted(array_to_sort)
    end_time = time.perf_counter()
    
    time_taken = end_time - start_time
    times.append(time_taken)

x_values = np.arange(7, len(times)+7)

plt.figure(figsize=(8, 4))

plt.plot(x_values, times, linestyle='-', color='blue')

plt.legend()

plt.title('Daily Price Changes to Sort vs Sorting Time')
plt.xlabel('Number of Price Changes Sorted')
plt.ylabel('Time')
plt.grid(True)
plt.tight_layout()
plt.show()